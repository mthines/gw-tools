{
  "name": "@gw-tools/gw",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "packages/gw-tool/src",
  "projectType": "library",
  "tags": [],
  "targets": {
    "check": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno check src/main.ts",
        "cwd": "packages/gw-tool"
      }
    },
    "test": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno test --allow-all",
        "cwd": "packages/gw-tool"
      }
    },
    "lint": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno lint",
        "cwd": "packages/gw-tool"
      }
    },
    "fmt": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno fmt",
        "cwd": "packages/gw-tool"
      }
    },
    "fmt-check": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno fmt --check",
        "cwd": "packages/gw-tool"
      }
    },
    "run": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno run --allow-all src/main.ts",
        "cwd": "packages/gw-tool"
      }
    },
    "dev": {
      "executor": "nx:run-commands",
      "options": {
        "command": "deno run --allow-all --watch src/main.ts",
        "cwd": "packages/gw-tool"
      }
    },
    "compile": {
      "executor": "nx:run-commands",
      "outputs": ["{workspaceRoot}/dist/packages/gw-tool"],
      "options": {
        "command": "deno compile --allow-all --output ../../dist/packages/gw-tool/gw src/main.ts",
        "cwd": "packages/gw-tool"
      }
    },
    "compile-all": {
      "executor": "nx:run-commands",
      "outputs": ["{workspaceRoot}/dist/packages/gw-tool/binaries"],
      "options": {
        "commands": [
          "mkdir -p ../../dist/packages/gw-tool/binaries",
          "deno compile --allow-all --target x86_64-unknown-linux-gnu --output ../../dist/packages/gw-tool/binaries/gw-linux-x64 src/main.ts",
          "deno compile --allow-all --target aarch64-unknown-linux-gnu --output ../../dist/packages/gw-tool/binaries/gw-linux-arm64 src/main.ts",
          "deno compile --allow-all --target x86_64-apple-darwin --output ../../dist/packages/gw-tool/binaries/gw-macos-x64 src/main.ts",
          "deno compile --allow-all --target aarch64-apple-darwin --output ../../dist/packages/gw-tool/binaries/gw-macos-arm64 src/main.ts",
          "deno compile --allow-all --target x86_64-pc-windows-msvc --output ../../dist/packages/gw-tool/binaries/gw-windows-x64.exe src/main.ts"
        ],
        "parallel": false,
        "cwd": "packages/gw-tool"
      }
    },
    "npm-pack": {
      "executor": "nx:run-commands",
      "outputs": ["{workspaceRoot}/dist/packages/gw-tool/npm"],
      "options": {
        "commands": [
          "mkdir -p ../../dist/packages/gw-tool/npm",
          "cp -r npm/* ../../dist/packages/gw-tool/npm/",
          "cp README.md ../../dist/packages/gw-tool/npm/"
        ],
        "parallel": false,
        "cwd": "packages/gw-tool"
      },
      "dependsOn": ["compile-all"]
    },
    "prepare-release": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "echo '\\nüì¶ Compiling binaries for all platforms...'",
          "nx run gw:compile-all",
          "echo '\\nüìù Preparing npm package...'",
          "nx run gw:npm-pack",
          "echo '\\n‚úÖ Release preparation complete!'",
          "echo '\\nNext steps:'",
          "echo '1. Create GitHub release with tag (e.g., v1.0.0)'",
          "echo '2. Upload binaries from dist/packages/gw-tool/binaries/'",
          "echo '3. Run: nx run gw:publish-npm'",
          "echo '\\nBinaries ready at: dist/packages/gw-tool/binaries/'"
        ],
        "parallel": false
      }
    },
    "publish-npm": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "echo '\\nüì¶ Publishing to npm...'",
          "echo 'Make sure you have:'",
          "echo '  1. Created a GitHub release with binaries'",
          "echo '  2. Updated version in npm/package.json'",
          "echo ''",
          "read -p 'Continue? (y/n) ' -n 1 -r && echo && [[ $REPLY =~ ^[Yy]$ ]] || exit 1",
          "cd npm && npm publish --access public"
        ],
        "parallel": false,
        "cwd": "packages/gw-tool"
      }
    },
    "publish-jsr": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "echo '\\nüì¶ Publishing to JSR...'",
          "echo 'Make sure deno.json has name, version, and exports configured'",
          "echo ''",
          "read -p 'Continue? (y/n) ' -n 1 -r && echo && [[ $REPLY =~ ^[Yy]$ ]] || exit 1",
          "deno publish --allow-dirty"
        ],
        "parallel": false,
        "cwd": "packages/gw-tool"
      }
    }
  }
}
